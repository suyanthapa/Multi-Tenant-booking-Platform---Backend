generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
}

model Resource {
    id         String @id @default(uuid())
    businessId String @map("business_id")

    name        String
    type        ResourceType
    description String?

    categoryId String?           @map("category_id")
    category   ResourceCategory? @relation(fields: [categoryId], references: [id])

    metadata Json? @default("{}") // "Special" fields 

    price    Decimal        @db.Decimal(10, 2)
    currency String         @default("USD")
    status   ResourceStatus @default(ACTIVE)

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@index([businessId])
    @@index([type])
    @@index([status])
    @@map("resources")
}

model ResourceCategory {
    id         String @id @default(uuid())
    businessId String @map("business_id")
    name       String // "Hot Yoga Room", "Presidential Suite", "General Ward"

    resources Resource[]

    @@unique([businessId, name]) // ex: A vendor can't have two "Deluxe" categories
}

enum ResourceType {
    HOTEL_ROOM
    DOCTOR_SLOT
    SALON_CHAIR
    DESK
    OTHER
}

enum ResourceStatus {
    ACTIVE
    INACTIVE
    MAINTENANCE
    DELETED
}
